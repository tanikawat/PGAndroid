<html>
<head>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
 <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Faz um seed pra popular
    //
    function populateDB(tx) {
		//GEOGRAPHY? 
		
		tx.executeSql('DROP TABLE IF EXISTS user');
        tx.executeSql('CREATE TABLE IF NOT EXISTS user (idUser INTEGER PRIMARY KEY AUTOINCREMENT, nome TEXT not null, login TEXT not null, password TEXT not null)');
		tx.executeSql('INSERT INTO user(nome,login,password) VALUES ("Tulio Tanikawa","Tulio","precisoDormir")');
		
		tx.executeSql('DROP TABLE IF EXISTS product');
        tx.executeSql('CREATE TABLE IF NOT EXISTS product (idProduct INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, tipo TEXT not null, nome TEXT not null, valor int)');
		tx.executeSql('INSERT INTO product(idUser,tipo,nome,valor) VALUES ("1","Pilula Do Sono","Dormilandia Pill",5000)');
		
		tx.executeSql('DROP TABLE IF EXISTS gps');
        tx.executeSql('CREATE TABLE IF NOT EXISTS gps (idGps INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, data datetime, lat TEXT not null, long TEXT not null, enviado boolean)');
		tx.executeSql('INSERT INTO gps(idUser,lat,long,enviado) VALUES ("1","-23.000","-46.000",1)');
		
		tx.executeSql('DROP TABLE IF EXISTS chat');
        tx.executeSql('CREATE TABLE IF NOT EXISTS chat (idChat INTEGER PRIMARY KEY AUTOINCREMENT, idUser int,de Text not null, para Text not null, message TEXT, lat TEXT not null, long TEXT not null)');
		tx.executeSql('INSERT INTO chat(idUser,de,para,message,lat,long) VALUES ("1","Tulio Tanikawa","Aecio Roussef da Silva","Quero money","-23.000","-46.000")');
		
		tx.executeSql('DROP TABLE IF EXISTS ponto');
        tx.executeSql('CREATE TABLE IF NOT EXISTS ponto (idPonto INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, data datetime, situacao TEXT, lat TEXT, long TEXT)');
		tx.executeSql('INSERT INTO ponto(idUser,situacao,lat,long) VALUES ("1","situacao precaria","-23.000","-46.000")');
		
		tx.executeSql('DROP TABLE IF EXISTS log');
        tx.executeSql('CREATE TABLE IF NOT EXISTS log (idLog INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, message TEXT, data datetime, lat TEXT not null, long TEXT not null)');
		tx.executeSql('INSERT INTO log(idUser,message,lat,long) VALUES ("1","Deu problema pra caramba na Base","-23.000","-46.000")');
		
		tx.executeSql('DROP TABLE IF EXISTS support');
        tx.executeSql('CREATE TABLE IF NOT EXISTS support (idSupport INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, message TEXT NOT NULL,data datetime, lat TEXT not null, long TEXT not null, situacao TEXT NOT NULL)');
		tx.executeSql('INSERT INTO support(idUser,message,lat,long,situacao) VALUES ("1","Suporte, me traga um copo dagua","-23.000","-46.000","Situacao de ter sede")');
		
		tx.executeSql('DROP TABLE IF EXISTS pedido');
        tx.executeSql('CREATE TABLE IF NOT EXISTS pedido (idPedido INTEGER PRIMARY KEY AUTOINCREMENT, idUser int, idProduto int, quantidade int, situacao TEXT, lat TEXT not null, long TEXT not null, data datetime)');
		tx.executeSql('INSERT INTO pedido(idUser,idProduto,quantidade,situacao,lat,long) VALUES ("1","1","666","Processado","-23.000","-46.000")');
    }

    // Query the database
    //
    function queryDB(tx) {
        tx.executeSql('SELECT * FROM user', [], querySuccess, errorCB);
    }

    // Query the success callback
    //
    function querySuccess(tx, results) {
        var len = results.rows.length;
        alert("user table: " + len + " rows found.");
        for (var i=0; i<len; i++){
        alert("Row = " + i + " idUser = " + results.rows.item(i).idUser + " nome =  " + results.rows.item(i).nome+ " login =  " + results.rows.item(i).login+ " pass =  " + results.rows.item(i).password );
        }
    }

    // Transaction error callback
    //
    function errorCB(err) {
        console.log("Error processing SQL: "+err.code);
    }

    // Transaction success callback
    //
    function successCB() {
        var db = window.openDatabase("dbPDV", "1.0", "PDV Demo", 200000);
        db.transaction(queryDB, errorCB);
    }

    // PhoneGap is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("dbPDV", "1.0", "PDV Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Database</p>
  </body>
</html>